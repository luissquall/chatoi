<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="">
		<meta name="author" content="">

		<title>Chatoi</title>

		<!-- Bootstrap core CSS -->
		<link href="/components/bootstrap/dist/css/bootstrap.css" rel="stylesheet">

		<!-- Custom styles for this template -->
		<link href="/stylesheets/core.css" rel="stylesheet">
		<link href="/stylesheets/index.css" rel="stylesheet">

		<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
			<script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
		<![endif]-->
	</head>

	<body>

		<!-- Fixed navbar -->
		{{> navbar}}

		<div class="container">
			<h1>Chatoi</h1>

			{{#unless auth}}
			<div class='row'>
				<div class='col-sm-4'>
					<!-- Sign in panel -->
					<div class='panel panel-default'>
						<div class='panel-heading'>
							<h3 class='panel-title'>Sign in to chat</h3>
						</div>

						<div class='panel-body'>
							<div id='signin-status'></div>

							<form id='signin-form' role="form" action="/authentication.json" method="POST" enctype="multipart/form-data">
								<div class="form-group">
									<label for="input-name">Username</label>
									<input type="text" class="form-control input-lg" id="input-name" placeholder="mono" name="username" data-trigger="focus" data-container="body" data-content="Your username cannot be longer than 8 characters and it can only contain alphanumeric characters (letters A-Z, numbers 0-9) with the exception of underscores">
								</div>

								<div class="form-group">
									<label for="input-image">Picture</label>
									<input type="file" id="input-image" name="image">
								</div>

								<button id='signin-btn' type="submit" class="btn btn-primary btn-lg btn-block">Sign in</button>
							</form>		
						</div>
					</div> <!-- / Sign in panel -->
				</div>
			</div>
			{{/unless}}

			{{#if auth}}
			<!-- Chat panel -->
			<div id='chat-panel' class='panel panel-info'>
				<div class='panel-heading'>
					<h3 class='panel-title'>Connecting...</h3>
				</div>

				<div class='panel-body'>
					<ul id='chat-window' class="media-list">
					</ul>

					<div class="form-group">
						<input type="text" class="form-control" id="input-message" placeholder="" name="message" autofocus disabled>
					</div>
				</div>
			</div> <!-- / Chat panel -->
			{{/if}}
		</div> <!-- /container -->


		{{#if auth}}
		<!-- Templates -->
		<script id="message-template" type="text/x-handlebars-template">
			<li class="media message-item">
				<div class="pull-left">
					<img class="media-object user-image " src="[[user.image]]" alt="[[user.username]]" />
				</div>

				<div class="media-body">
					<h4 class="media-heading"><span class='user-username'>[[user.username]]</span> <small><time class="message-created" datetime="[[created]]">[[ago]]</time></small></h4>
					<div class="message-content">
						[[content]]
					</div>		
				</div>
			</li>
		</script>
		{{/if}}

		<!-- Bootstrap core JavaScript
		================================================== -->
		<!-- Placed at the end of the document so the pages load faster -->
		<script src="/components/jquery/jquery.min.js"></script>
		<script src="/components/bootstrap/dist/js/bootstrap.min.js"></script>
		<script src="/components/socket.io-client/dist/socket.io.min.js"></script>
		<script src="/components/moment/min/moment.min.js"></script>
		<script src="/components/handlebars/handlebars.min.js"></script>
		<script src="/javascripts/core.js"></script>
		<script src="/javascripts/chat.js"></script>
		<script src="/javascripts/index.js"></script>
	</body>
</html>
